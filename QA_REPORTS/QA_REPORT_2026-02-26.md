# QA Audit Report — Smash Sports Dashboard

**Date:** 2026-02-26
**Auditor:** Claude (Automated QA)
**Dashboard Version:** Prompts 01-05 Complete
**Environment:** Next.js 16.1.6 / better-sqlite3 / Recharts v3.7.0

---

## Executive Summary

The Smash Sports Dashboard has been audited across 6 dimensions: Data Completeness, Calculation Verification, Refresh & Scheduling Health, Show Attribution Accuracy, Talent Tracking Integrity, and UI & Display Verification.

**Overall Health Score: 72 / 100**

The dashboard is functional and delivers on its core requirements across all 5 views (Lifetime, Weekly, Current Week, Shows, Talent). The primary data pipeline (Sprout Social API refresh) is working reliably with a 100% success rate across 9 refreshes. However, several platform-specific data gaps exist (YouTube impressions, universal zero saves/clicks), timezone handling is inconsistent, and there are UI formatting inconsistencies that should be addressed before production use.

### Score Breakdown

| Category | Score | Weight | Weighted |
|---|---|---|---|
| Data Completeness | 60/100 | 25% | 15.0 |
| Calculation Accuracy | 80/100 | 20% | 16.0 |
| Refresh & Scheduling | 85/100 | 15% | 12.75 |
| Show Attribution | 75/100 | 15% | 11.25 |
| Talent Tracking | 70/100 | 15% | 10.5 |
| UI & Display | 65/100 | 10% | 6.5 |
| **TOTAL** | | **100%** | **72.0** |

---

## Severity Classification

| Severity | Count | Description |
|---|---|---|
| CRITICAL | 4 | Data integrity issues affecting accuracy of displayed metrics |
| HIGH | 6 | Functional issues that impact user trust or decision-making |
| MEDIUM | 7 | Quality issues that should be fixed but don't block usage |
| LOW | 7 | Polish items and minor inconsistencies |

---

## CRITICAL Findings

### C-01: YouTube — 100% Zero Impressions & Clicks
- **Scope:** 534 YouTube posts (100% affected)
- **Root Cause:** Sprout Social API does not return `impressions` or `clicks` for YouTube network type. The refresh route at `app/api/refresh/route.ts` maps `post.metrics.impressions` directly, but the Sprout API returns `null`/`0` for YouTube.
- **Impact:** YouTube impression-based metrics (reach, CPM estimates) are completely unreliable. EMV for YouTube is calculated from engagements only, inflating per-engagement value.
- **Evidence:** `SELECT COUNT(*) FROM posts WHERE platform = 'youtube' AND impressions = 0` → **534 (100%)**
- **Suggested Fix:**
  ```
  FILE: app/api/refresh/route.ts
  ACTION: Add platform-aware field mapping. For YouTube, use video_views as
  impressions proxy OR flag YouTube impressions as "unavailable" in the UI.
  Display a data-source caveat badge next to YouTube metrics.
  ```

### C-02: All Platforms — 100% Zero Saves
- **Scope:** 6,608 posts across all 5 platforms (100% affected)
- **Root Cause:** In `app/api/refresh/route.ts`, the saves field is hardcoded: `savesCount = 0`. The Sprout Social API field for saves is not being mapped.
- **Impact:** Save-based engagement metrics are completely missing. EMV calculations exclude saves contribution, undervaluing content that drives saves (especially Instagram and TikTok).
- **Evidence:** `SELECT COUNT(*) FROM posts WHERE saves = 0` → **6,608 (100%)**
- **Suggested Fix:**
  ```
  FILE: app/api/refresh/route.ts
  ACTION: Map Sprout's post.metrics.saves (or platform-specific save field)
  to the saves column. If Sprout doesn't provide saves for a platform,
  document it and set to NULL (not 0) to distinguish "not available" from
  "zero saves".
  ```

### C-03: Instagram/TikTok/Facebook — 100% Zero Clicks
- **Scope:** Instagram (1,525), TikTok (651), Facebook (509 of 757) — all have zero clicks
- **Root Cause:** Sprout Social API returns clicks inconsistently across platforms. The refresh route maps `post.metrics.clicks` but the API returns `null`/`0` for these networks.
- **Impact:** Click-through rate calculations for these platforms are impossible. Any CTR-based reporting would show 0% for 3 of 5 platforms.
- **Evidence:**
  - Instagram: 1,525/1,525 = **100% zero clicks**
  - TikTok: 651/651 = **100% zero clicks**
  - Facebook: 509/757 = **67% zero clicks**
  - YouTube: 534/534 = **100% zero clicks**
  - X: 0% zero clicks (X provides click data)
- **Suggested Fix:**
  ```
  FILE: app/api/refresh/route.ts
  ACTION: Investigate Sprout Social API docs for platform-specific click
  field names. For platforms that genuinely don't provide clicks, store NULL
  and hide click columns in platform-specific views.
  ```

### C-04: Talent Post Cross-Platform Deduplication Not Implemented
- **Scope:** 473 talent posts — confirmed duplicate content entries exist
- **Root Cause:** When talent members cross-post the same content to multiple platforms (e.g., same text to Instagram and TikTok), each is stored as a separate row. No deduplication logic exists in the seed script or ingestion API. Engagement totals could be double-counted.
- **Impact:** Talent who cross-post appear to have inflated post counts and engagement totals. This skews the leaderboard rankings and engagement-per-post metrics.
- **Evidence:** DB query found 5+ content entries with duplicate text across different platform rows.
- **Suggested Fix:**
  ```
  FILE: lib/talent-data-processing.ts
  ACTION: Add content fingerprinting (e.g., normalize + hash first 100 chars)
  and group cross-platform posts. Display "X unique posts (Y total across
  platforms)" in the leaderboard. EMV should still be calculated per-platform
  but engagement summaries should note cross-platform posting.
  ```

---

## HIGH Findings

### H-01: Timezone Inconsistency — UTC vs SAST
- **Scope:** `lib/show-data-processing.ts`, `lib/talent-data-processing.ts`
- **Root Cause:** The `getWeekStart()` function uses `date.getUTCDay()` and `date.setUTCDate()` for week boundary calculations, but the spec requires SAST (Africa/Johannesburg, UTC+2). Posts created at 23:00 UTC on a Sunday would be Monday 01:00 SAST, potentially landing in the wrong week bucket.
- **Impact:** Weekly aggregation boundaries may be off by up to 2 hours. Posts near midnight SAST could be assigned to the wrong week, affecting weekly comparison accuracy.
- **Suggested Fix:**
  ```
  FILE: lib/show-data-processing.ts, lib/talent-data-processing.ts
  ACTION: Replace getUTCDay()/setUTCDate() with SAST-aware date calculations.
  Use: new Date(date.toLocaleString('en-US', { timeZone: 'Africa/Johannesburg' }))
  to convert before computing week boundaries.
  ```

### H-02: No Explicit Cron/Scheduler Configuration
- **Scope:** `app/api/refresh/route.ts`
- **Root Cause:** The refresh endpoint is a standard Next.js API route with no built-in scheduling. It relies on an external scheduler (cron, Vercel cron, etc.) to trigger it. No cron configuration file exists in the project.
- **Impact:** If the external scheduler fails or isn't configured in deployment, data refresh stops silently. No monitoring or alerting for missed refreshes.
- **Suggested Fix:**
  ```
  FILE: vercel.json (NEW) or next.config.ts
  ACTION: Add Vercel cron configuration:
  { "crons": [{ "path": "/api/refresh", "schedule": "0 */6 * * *" }] }
  Or document the external scheduler requirement in README.
  Also add a "staleness check" to the dashboard UI that warns if last
  refresh was >24 hours ago.
  ```

### H-03: Dashboard Client Components Fail Silently
- **Scope:** `TalentDashboardClient.tsx`, `TalentDrillDown.tsx`, `ShowsDashboardClient.tsx`
- **Root Cause:** The `fetchData` callback on date range change catches errors with `console.error()` but does not display any error state to the user. If a refresh fails, the old data remains displayed with no indication of failure.
- **Impact:** Users may be viewing stale data without knowing a refresh failed. This erodes trust in the dashboard's accuracy.
- **Suggested Fix:**
  ```
  FILE: components/talent/TalentDashboardClient.tsx (and similar)
  ACTION: Add an error state variable. On fetch failure, display a toast or
  inline error message: "Failed to update data. Showing previous results."
  Allow user to retry.
  ```

### H-04: AnimatedNumber Always Animates From Zero
- **Scope:** `components/ui/AnimatedNumber.tsx`
- **Root Cause:** The animation always starts from 0 and counts up to the target value. When switching date ranges, numbers animate from 0 to the new value instead of from the previous value to the new value.
- **Impact:** Visual jarring on date range switches. Brief display of incorrect intermediate values during animation. Minor trust concern as users see the number "counting up" each time.
- **Suggested Fix:**
  ```
  FILE: components/ui/AnimatedNumber.tsx
  ACTION: Track previous value via useRef. On value change, animate from
  previousValue to newValue. Use useEffect to update the ref after animation.
  ```

### H-05: TalentFrequencyChart Tooltip Shows Raw Numbers
- **Scope:** `components/talent/TalentFrequencyChart.tsx`
- **Root Cause:** The Recharts `Tooltip` formatter returns the raw number value without applying `formatCompact()`. Other charts in the dashboard apply formatting consistently.
- **Impact:** Tooltip shows "15234" instead of "15.2K", inconsistent with other chart tooltips.
- **Suggested Fix:**
  ```
  FILE: components/talent/TalentFrequencyChart.tsx
  ACTION: Update Tooltip formatter to use formatCompact():
  formatter={(value) => [formatCompact(value ?? 0), name]}
  ```

### H-06: X (Twitter) — Zero Posts in Posts Table Under 'twitter' Platform Name
- **Scope:** All X/Twitter posts
- **Root Cause:** Platform stored as `'x'` in database (correct), but some code references or queries may use `'twitter'` (legacy naming). Current database has 3,141 posts under platform `'x'` and 0 under `'twitter'`.
- **Impact:** Any hardcoded `'twitter'` references would miss all X posts. Current implementation appears correct but fragile to regressions.
- **Evidence:** DB shows `x: 3,141 posts`, `twitter: 0 posts`. Platform config uses `'x'` consistently.

---

## MEDIUM Findings

### M-01: Multiple Inconsistent `computeDelta` Implementations
- **Scope:** `lib/show-data-processing.ts`, `lib/talent-data-processing.ts`
- **Description:** Both files define their own `computeDelta()` function. The implementations may have subtle differences in edge case handling (e.g., when previous value is 0). Should be a shared utility.
- **Suggested Fix:** Extract to `lib/utils.ts` as a single shared `computeDelta(current, previous)` function.

### M-02: Keyword Attribution False Positive Risk
- **Scope:** `config/shows.json`, `lib/show-attribution.ts`
- **Description:** Broad keywords like `"big 3"` could match unrelated content (e.g., "big 3-day sale"). The regex uses `\\b` word boundary which helps, but compound phrases with numbers are inherently fragile.
- **Suggested Fix:** Add negative lookahead patterns for known false positive contexts. Consider requiring keyword + at least one hashtag for attribution confidence.

### M-03: Seed Script Generates No Unattributed Talent Posts
- **Scope:** `scripts/seed-talent.ts`
- **Description:** Every generated talent post includes show-specific hashtags. This means the `no_hashtag` alert type in `TalentAlerts` can never trigger with seeded data. The alert logic cannot be verified.
- **Suggested Fix:** Add a 10-15% chance of generating "generic" posts without show hashtags (e.g., "Great day at the studio! #smashsports").

### M-04: Donut Chart Percentages Not Validated
- **Scope:** Show breakdown donut in `TalentDrillDown.tsx`, platform donut in Shows view
- **Description:** Recharts `PieChart` automatically normalizes slices, but displayed percentage labels (if added) could show rounding errors that don't sum to 100%.
- **Suggested Fix:** If adding percentage labels, use a rounding algorithm that ensures sum = 100% (largest remainder method).

### M-05: `formatCurrency` Uses 0 Decimal Places
- **Scope:** `lib/utils.ts`
- **Description:** `formatCurrency()` uses `maximumFractionDigits: 0`, displaying "R 1,234" instead of "R 1,234.56". For individual post EMV values that may be small, this loses precision.
- **Suggested Fix:** Use 0 decimals for values > R1,000 and 2 decimals for smaller values. Or allow callers to specify precision.

### M-06: Missing Error Boundary Components
- **Scope:** All client components
- **Description:** No React Error Boundary components wrap the chart-heavy client components. A Recharts rendering error in one chart could crash the entire page.
- **Suggested Fix:** Add `<ErrorBoundary>` wrappers around each chart section with fallback UI.

### M-07: Refresh Log Missing Duration Column
- **Scope:** `db/schema.sql`, `refresh_log` table
- **Description:** The `refresh_log` table has `started_at` and `completed_at` but no pre-computed `duration_ms` column. Duration must be calculated at read time. The latest refresh took ~98 seconds.
- **Suggested Fix:** Add a computed `duration_ms` column or a view that calculates it. Useful for monitoring refresh performance trends.

---

## LOW Findings

### L-01: Missing Table Accessibility Attributes
- **Scope:** `TalentLeaderboard.tsx`, `TalentPostFeed.tsx`, `TalentShowMatrix.tsx`, `TalentActivityGrid.tsx`
- **Description:** Tables lack `scope="col"` on `<th>` elements, `aria-sort` on sortable columns, and `role="table"` attributes.
- **Suggested Fix:** Add ARIA attributes to all table headers and sortable columns.

### L-02: `formatGrowth(0)` Returns "+0.0%"
- **Scope:** `lib/utils.ts`
- **Description:** When growth is exactly zero, `formatGrowth()` returns "+0.0%" instead of "0.0%". The positive sign is misleading for a flat metric.
- **Suggested Fix:** Add zero check: `if (value === 0) return '0.0%'`.

### L-03: `formatCompact` Inconsistent Decimal Places
- **Scope:** `lib/utils.ts`
- **Description:** `formatCompact()` shows 1 decimal for K (thousands) but 2 decimals for M and B. This is inconsistent, though arguably intentional for readability.

### L-04: Missing Empty State Messages
- **Scope:** Several components
- **Description:** Components like `TalentActivityGrid`, `TalentShowMatrix`, and `TalentFrequencyChart` don't display user-friendly messages when data arrays are empty.
- **Suggested Fix:** Add conditional rendering: `{data.length === 0 && <EmptyState message="No data for this period" />}`

### L-05: EMV Rates Have No Documented Source
- **Scope:** `config/emv-rates.json`
- **Description:** The ZAR-denominated EMV rates have no documentation about their source, methodology, or last review date. The file has `lastUpdated: "2026-02-24"` but no source attribution.
- **Suggested Fix:** Add a `source` and `methodology` field to the config, or a companion `EMV_METHODOLOGY.md` document.

### L-06: Talent Leaderboard Imports Server Module in Client Component
- **Scope:** `components/talent/TalentLeaderboard.tsx`
- **Description:** Imports `getTalentInitials` from `lib/talent-config.ts` which reads `config/talent.json`. This works because Next.js 16 handles JSON imports in client components, but it's a fragile pattern. If `talent-config.ts` ever imports a server-only module (like `better-sqlite3`), it will break.
- **Suggested Fix:** Extract `getTalentInitials()` to a pure utility function in `lib/utils.ts` that doesn't import config files.

### L-07: No Loading Skeleton States
- **Scope:** All dashboard pages
- **Description:** During date range switches, pages show `opacity-70` dimming but no skeleton loaders. Users see stale data at reduced opacity rather than placeholder content indicating what's loading.
- **Suggested Fix:** Add skeleton components for each section that match the layout dimensions.

---

## Platform-by-Platform Status

| Platform | Posts | Zero Impressions | Zero Engagements | Zero Views | Zero Clicks | Zero Saves | Zero Reactions | EMV Avg (R) | Status |
|---|---|---|---|---|---|---|---|---|---|
| Instagram | 1,525 | 18 (1%) | 664 (44%) | 21 (1%) | 1,525 (100%) | 1,525 (100%) | 782 (51%) | 397.95 | PARTIAL |
| TikTok | 651 | 16 (2%) | 18 (3%) | 16 (2%) | 651 (100%) | 651 (100%) | 18 (3%) | 7,491.06 | PARTIAL |
| X (Twitter) | 3,141 | — | — | — | 0 (0%) | 3,141 (100%) | — | 32.30 | PARTIAL |
| YouTube | 534 | 534 (100%) | 62 (12%) | 43 (8%) | 534 (100%) | 534 (100%) | 65 (12%) | 2,507.06 | DEGRADED |
| Facebook | 757 | 34 (4%) | 104 (14%) | 233 (31%) | 509 (67%) | 757 (100%) | 146 (19%) | 956.83 | PARTIAL |

**Status Key:**
- **HEALTHY**: All key metrics populated (>90%)
- **PARTIAL**: Some metrics missing but core data (engagements, views) available
- **DEGRADED**: Major metric gaps affecting reliability
- **CRITICAL**: Data unusable for this platform

**Notes:**
- No platform achieves HEALTHY status due to universal zero saves (C-02)
- YouTube is DEGRADED due to 100% zero impressions + clicks (C-01)
- X has the most complete data with clicks populated
- Instagram has surprisingly high zero-engagement rate (44%) — may indicate Sprout API returning posts with metadata but no engagement data yet (recently published posts)

---

## Show Attribution Status

| Show | ID | Hashtags | Keywords | Attribution Risk |
|---|---|---|---|---|
| Big 3 | `big-3` | `#big3`, `#thebig3` | `"big 3"`, `"big three"` | MEDIUM — `"big 3"` is a broad phrase |
| Best of Enemies | `best-of-enemies` | `#boe`, `#bestofenemies` | `"best of enemies"` | LOW |
| Betway Prem | `betway-prem` | `#betwayprem` | `"betway prem"`, `"betway premiership"` | LOW |
| Hot Takes | `hot-takes` | `#hottakes` | `"hot takes"` | MEDIUM — common phrase |
| Behind the Boot | `behind-the-boot` | `#behindtheboot`, `#btb` | `"behind the boot"` | LOW |

**Attribution Engine:**
- Regex pattern: `#${tag}(?:\\b|[\\s,;.!?]|$)` — matches hashtags case-insensitively
- Keyword matching: `new RegExp(keyword, 'i')` — basic case-insensitive substring match
- Multi-attribution supported: a post mentioning multiple shows gets attributed to all
- False positive risk exists for `"big 3"` and `"hot takes"` as general English phrases

---

## Talent Tracking Status

| Metric | Value | Status |
|---|---|---|
| Configured Talent | 16 | OK |
| Active Talent (in DB) | 16 | OK |
| Total Talent Posts | 473 | OK |
| Posts Date Range | 2025-12-04 to 2026-02-25 | OK — 12 weeks |
| Avg Posts/Talent | 29.6 | OK |
| Platforms Covered | 5 (IG, TikTok, X, YouTube, Facebook) | OK |
| Posts with Show Attribution | ~100% (seed) | ISSUE — no unattributed test data |
| Cross-Platform Dedup | Not Implemented | CRITICAL — see C-04 |
| Duplicate Content Entries | 5+ found | WARNING — confirms C-04 |
| EMV Calculated | Yes, all posts | OK |

**Talent Distribution (posts per talent):**

| Talent | Posts | Total Engagements |
|---|---|---|
| Ayanda Ndlovu | 35 | 66,116 |
| Dumisani Mkhize | 34 | 30,206 |
| Kamogelo Phiri | 33 | 45,266 |
| Lesego Tau | 33 | 71,634 |
| Palesa Mahlangu | 32 | 58,325 |
| Zanele Mthembu | 32 | 66,137 |
| Lindiwe Shabalala | 29 | 63,956 |
| Mandla Cele | 29 | 45,127 |
| Sipho Nkosi | 29 | 29,571 |
| Naledi Khumalo | 28 | 53,137 |
| Nompumelelo Mbeki | 28 | 52,391 |
| Thabang Sithole | 28 | 40,646 |
| Bongani Zulu | 27 | 31,668 |
| Kgotso Molefe | 27 | 46,865 |
| Refiloe Dlamini | 26 | 63,219 |
| Thato Mokoena | 23 | 31,319 |

---

## Refresh & Scheduling Status

| Metric | Value | Status |
|---|---|---|
| Total Refreshes | 9 | OK |
| Success Rate | 100% (9/9) | HEALTHY |
| Last Refresh | 2026-02-26 10:37:36 | OK (today) |
| Last Duration | ~98 seconds | OK |
| Records Updated | 15,365 | OK |
| Cron Config | None found | WARNING — see H-02 |
| Staleness Warning | Not implemented | WARNING |
| Error Alerting | Not implemented | WARNING |
| Retry Logic | Yes (exponential backoff on 429) | OK |
| Token Refresh | Yes (M2M OAuth) | OK |

**Refresh History (last 5):**

| Timestamp | Status | Records | Notes |
|---|---|---|---|
| 2026-02-26 10:37:36 | completed | 15,365 | |
| 2026-02-26 06:47:03 | completed | 15,351 | |
| 2026-02-26 05:28:40 | completed | 15,342 | |
| 2026-02-25 13:06:52 | completed | 15,330 | |
| 2026-02-25 12:27:44 | completed | 15,330 | |

---

## Database Health

| Table | Rows | Size Contribution | Status |
|---|---|---|---|
| profiles | 24 | Minimal | OK |
| daily_metrics | 8,808 | ~40% | OK — 366 days coverage |
| posts | 6,608 | ~35% | PARTIAL — zero field issues |
| weekly_snapshots | 96 | ~5% | OK |
| refresh_log | 9 | Minimal | OK |
| talent_posts | 473 | ~5% | OK — 12 weeks seeded |
| **Total DB Size** | | **4.4 MB** | OK |

**Indexes:**
- `idx_talent_posts_talent` — talent_id lookup
- `idx_talent_posts_created` — date range queries
- `idx_talent_posts_platform` — platform filtering
- Posts table: no explicit indexes (relies on primary key)

**Recommendation:** Add indexes on `posts(platform)`, `posts(created_at)`, and `posts(profile_id)` for query performance as data grows.

---

## Action Items

| Priority | ID | Action | Effort | Files |
|---|---|---|---|---|
| P0 | C-01 | Fix YouTube impressions mapping or add platform caveat | M | `app/api/refresh/route.ts`, UI components |
| P0 | C-02 | Map saves field from Sprout API (or NULL if unavailable) | S | `app/api/refresh/route.ts` |
| P0 | C-03 | Investigate clicks per platform in Sprout API docs | M | `app/api/refresh/route.ts` |
| P0 | C-04 | Implement talent post deduplication logic | L | `lib/talent-data-processing.ts`, `scripts/seed-talent.ts` |
| P1 | H-01 | Fix week boundary calculation to use SAST timezone | M | `lib/show-data-processing.ts`, `lib/talent-data-processing.ts` |
| P1 | H-02 | Add Vercel cron config or document scheduler requirement | S | `vercel.json` or `README.md` |
| P1 | H-03 | Add error state UI for failed data refreshes | M | Client components (3 files) |
| P1 | H-04 | Fix AnimatedNumber to animate from previous value | S | `components/ui/AnimatedNumber.tsx` |
| P1 | H-05 | Apply formatCompact to TalentFrequencyChart tooltip | S | `components/talent/TalentFrequencyChart.tsx` |
| P1 | H-06 | Audit all platform name references for 'twitter' vs 'x' | S | Project-wide search |
| P2 | M-01 | Consolidate computeDelta to shared utility | S | `lib/utils.ts`, 2 processing files |
| P2 | M-02 | Add keyword attribution safeguards | M | `lib/show-attribution.ts`, `config/shows.json` |
| P2 | M-03 | Add unattributed posts to seed script | S | `scripts/seed-talent.ts` |
| P2 | M-04 | Add percentage rounding validation for donuts | S | Chart components |
| P2 | M-05 | Add precision control to formatCurrency | S | `lib/utils.ts` |
| P2 | M-06 | Add React Error Boundaries around chart sections | M | New component + wrappers |
| P2 | M-07 | Add duration tracking to refresh_log | S | `app/api/refresh/route.ts`, schema |
| P3 | L-01 | Add ARIA attributes to tables | S | 4 table components |
| P3 | L-02 | Fix formatGrowth(0) to omit plus sign | S | `lib/utils.ts` |
| P3 | L-03 | Standardize formatCompact decimal places | S | `lib/utils.ts` |
| P3 | L-04 | Add empty state components | S | Multiple components |
| P3 | L-05 | Document EMV rate methodology | S | `config/EMV_METHODOLOGY.md` |
| P3 | L-06 | Extract getTalentInitials to pure utility | S | `lib/utils.ts`, `lib/talent-config.ts` |
| P3 | L-07 | Add skeleton loading states | M | New components + integration |

**Effort Key:** S = Small (<1hr), M = Medium (1-4hr), L = Large (4hr+)

---

## Files Audited

### Configuration (3)
- `config/talent.json` — 16 talent members, correct structure
- `config/shows.json` — 5 shows, hashtags + keywords
- `config/emv-rates.json` — ZAR rates, no source documentation

### Database (2)
- `db/schema.sql` — 6 tables, 3 talent indexes
- `db/smash-dashboard.sqlite` — 4.4MB, WAL mode

### API Routes (5)
- `app/api/refresh/route.ts` — Sprout Social data pipeline
- `app/api/talent/route.ts` — Talent overview endpoint
- `app/api/talent/[talentId]/route.ts` — Talent drill-down endpoint
- `app/api/talent/posts/route.ts` — Manual ingestion endpoint
- `app/api/shows/route.ts` — Show overview endpoint (reference)

### Libraries (7)
- `lib/talent-types.ts` — Type definitions
- `lib/talent-config.ts` — Config accessors
- `lib/talent-attribution.ts` — Show matching for talent posts
- `lib/talent-data-processing.ts` — Overview + drill-down builders
- `lib/show-attribution.ts` — Core attribution engine
- `lib/show-data-processing.ts` — Show processing (timezone issue)
- `lib/utils.ts` — Formatting utilities

### Components (12)
- `components/talent/TalentDashboardClient.tsx` — Overview assembly
- `components/talent/TalentDrillDown.tsx` — Drill-down assembly
- `components/talent/TalentAdvocacyBar.tsx` — Stats bar
- `components/talent/TalentLeaderboard.tsx` — Sortable table
- `components/talent/TalentActivityGrid.tsx` — Heat map
- `components/talent/TalentShowMatrix.tsx` — Cross-reference
- `components/talent/TalentFrequencyChart.tsx` — Frequency bars
- `components/talent/TalentEngagementBars.tsx` — Engagement ranking
- `components/talent/TalentAlerts.tsx` — Alert cards
- `components/talent/TalentPostFeed.tsx` — Post table
- `components/ui/AnimatedNumber.tsx` — Number animation
- `components/ui/GrowthBadge.tsx` — Growth indicator

### Pages (3)
- `app/talent/page.tsx` — Overview page
- `app/talent/[talentId]/page.tsx` — Drill-down page
- `scripts/seed-talent.ts` — Demo data generator

---

## Recommendations Summary

### Immediate (Before Production)
1. **Resolve the saves/clicks data gap** (C-02, C-03) — investigate Sprout API field mappings
2. **Add YouTube impressions caveat** (C-01) — either fix mapping or add UI disclaimer
3. **Fix timezone handling** (H-01) — critical for weekly accuracy in SAST

### Short Term (Next Sprint)
4. **Implement talent deduplication** (C-04) — content hashing + cross-platform grouping
5. **Add error states to client components** (H-03) — user-visible error handling
6. **Configure cron scheduling** (H-02) — Vercel cron or documented external scheduler
7. **Fix AnimatedNumber transition** (H-04) — animate from previous value

### Medium Term (Backlog)
8. **Consolidate shared utilities** (M-01) — single computeDelta, shared helpers
9. **Improve attribution accuracy** (M-02) — keyword safeguards, confidence scoring
10. **Add React Error Boundaries** (M-06) — prevent chart crashes from breaking pages
11. **Accessibility improvements** (L-01) — ARIA attributes on all tables

---

*Report generated 2026-02-26 by Claude QA Auditor*
*Next audit recommended after addressing P0 and P1 items*
